language: objective-c
osx_image: xcode9.3
#xcode_project: Koosa.xcodeproj
#xcode_scheme: Koosa
#xcode_destination: platform=iOS Simulator,OS=11.3,name=iPhone X
before_install: rvm use $RVM_RUBY_VERSION
install: bundle install --without=documentation --path ../travis_bundle_dir
script:
  - xcodebuild -scheme Koosa -project Koosa.xcodeproj -sdk iphonesimulator -destination 'platform=iOS Simulator,OS=11.3,name=iPhone X' build test GCC_INSTRUMENT_PROGRAM_FLOW_ARCS=YES GCC_GENERATE_TEST_COVERAGE_FILES=YES
after_success:
  - fastlane coverage
  - bash <(curl -s https://codecov.io/bash) -f path/to/xml_report/cobertura.xml -X coveragepy -X gcov -X xcode
